<!DOCTYPE html>
<html lang="en">
	<head>
		<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
		<meta charset="utf-8" />
		<title>上海市普陀区捺印指纹大数据智能分析和统计展示平台</title>

		<meta name="description" content="overview &amp; stats" />
		<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0" />

		<!-- bootstrap & fontawesome -->
		<link rel="stylesheet" href="../assets/css/bootstrap.min.css" />
		<link rel="stylesheet" href="../assets/font-awesome/4.5.0/css/font-awesome.min.css" />

		<!-- page specific plugin styles -->

		<!-- text fonts -->
		<link rel="stylesheet" href="../assets/css/fonts.googleapis.com.css" />

		<!-- ace styles -->

		<link rel="stylesheet" href="../assets/css/ace.min.css" class="ace-main-stylesheet" id="main-ace-style" />

		<!--[if lte IE 9]>
			<link rel="stylesheet" href="../assets/css/ace-part2.min.css" class="ace-main-stylesheet" />
		<![endif]-->
		<link rel="stylesheet" href="../assets/css/ace-skins.min.css" />
		<link rel="stylesheet" href="../assets/css/ace-rtl.min.css" />

		<!--[if lte IE 9]>
		  <link rel="stylesheet" href="../assets/css/ace-ie.min.css" />
		<![endif]-->

		<!-- inline styles related to this page -->

		<!-- ace settings handler -->
		<script src="../assets/js/ace-extra.min.js"></script>

		<!-- HTML5shiv and Respond.js for IE8 to support HTML5 elements and media queries -->

		<!--[if lte IE 8]>
		<script src="../assets/js/html5shiv.min.js"></script>
		<script src="../assets/js/respond.min.js"></script>
		<![endif]-->

		<style type="text/css">
			html,body{height:100%;}
			body{margin:0;padding:0;font-family:"宋体",Arial;font-size:12px;margin:0 auto; background-color:#FFF;}
			html, body, div, span, h1, h2, h3, h4, h5, h6, img, strong, sub, sup, tt,dd, dl, dt, form, label, table, caption, tbody, tfoot, thead, tr, th, td,ul,li,p,a{margin: 0; padding: 0;}

			/*header*/
			.header-bg, .header-left{width:100%; height:69px;}
			.header-bg{background:url(../images/topbg.png) }
			.header-left{background:url(../images/top_left.png) left center no-repeat;}
			.tuchu-anliu{height:30px; float:right; margin-top:25px; margin-right:20px; }
			.dltip{width:100%; height:29px; background:url(../images/syhpt-1.jpg) left center no-repeat;}
			.dltip-nr{ height:29px; font-family:Verdana, Geneva, sans-serif; font-size:12px; color:#000; line-height:29px; float:right; margin-right:20px; }
			.dltip-nr img{ _margin-top:8px; vertical-align:middle;}
			.ysbj{width:100%; height:5px; background-color:#1F6DBB;}
		</style>

	</head>

	<body class="no-skin">
	<div class="header-bg">
		<div class="header-left">
			<div class="tuchu-anliu">
				<a href="#" onclick="signOut()"><img src="../images/anliu-tcdl.gif" width="92" height="30" /></a>
			</div>
		</div>
	</div>
	<div class="dltip">
		<p class="dltip-nr"><img src="../images/tubiao-1.gif" /><span>当前用户:</span><span id="loginUser"></span></p>
	</div>
	<div class="ysbj"></div>

		<!--<div id="navbar" class="navbar navbar-default          ace-save-state">
			<div class="navbar-container ace-save-state" id="navbar-container">
				<button type="button" class="navbar-toggle menu-toggler pull-left" id="menu-toggler" data-target="#sidebar">
					<span class="sr-only">Toggle sidebar</span>

					<span class="icon-bar"></span>

					<span class="icon-bar"></span>

					<span class="icon-bar"></span>
				</button>
				<div class="navbar-header pull-left">
					<a href="main.html" class="navbar-brand">
						<small>
							上海市普陀区捺印指纹大数据智能分析和统计展示平台-首页
						</small>
					</a>
				</div>


				<div class="navbar-header pull-right">
					<small>
						<span>当前用户:</span><span id="loginUser"></span>&nbsp;&nbsp;
							<a href="#" >
								<span style="font-size: 15px;color: black;font-style:normal " id="signOut">退出登录</span>
							</a>
					</small>
					
				</div>
			</div>&lt;!&ndash; /.navbar-container &ndash;&gt;
		</div>-->

		<div class="main-container ace-save-state" id="main-container">
			<script type="text/javascript">
				try{ace.settings.loadState('main-container')}catch(e){}
			</script>

			<div id="sidebar" class="sidebar                  responsive                    ace-save-state">
				<script type="text/javascript">
					try{ace.settings.loadState('sidebar')}catch(e){}
				</script>

				<div id='sidebar-js'>
				</div>
				<div class="sidebar-toggle sidebar-collapse" id="sidebar-collapse">
					<i id="sidebar-toggle-icon" class="ace-icon fa fa-angle-double-left ace-save-state" data-icon1="ace-icon fa fa-angle-double-left" data-icon2="ace-icon fa fa-angle-double-right"></i>
				</div>
			</div>


			<div class="main-content" id="main-content" >
				<div id="main" ></div>
			</div>

			<div class="footer">
				<div class="footer-inner">
					<div class="footer-content">
						<span class="bigger-120">
							<span class="blue bolder">Cherish</span>
							北京东方金指科技有限公司 &copy; 2019
						</span>

						&nbsp; &nbsp;
					</div>
				</div>
			</div>

			<a href="#" id="btn-scroll-up" class="btn-scroll-up btn btn-sm btn-inverse">
				<i class="ace-icon fa fa-angle-double-up icon-only bigger-110"></i>
			</a>
		</div><!-- /.main-container -->

		<!-- basic scripts -->

		<!--[if !IE]> -->
		<script src="../assets/js/jquery-2.1.4.min.js"></script>

		<!-- <![endif]-->

		<!--[if IE]>
<script src="assets/js/jquery-1.11.3.min.js"></script>
<![endif]-->
		<script type="text/javascript">
			if('ontouchstart' in document.documentElement) document.write("<script src='../assets/js/jquery.mobile.custom.min.js'>"+"<"+"/script>");
		</script>
		<script src="../assets/js/bootstrap.min.js"></script>

		<!-- page specific plugin scripts -->

		<!--[if lte IE 8]>
		  <script src="assets/js/excanvas.min.js"></script>
		<![endif]-->
		<script src="../assets/js/jquery-ui.custom.min.js"></script>
		<script src="../assets/js/jquery.ui.touch-punch.min.js"></script>
		<script src="../assets/js/jquery.easypiechart.min.js"></script>
		<script src="../assets/js/jquery.sparkline.index.min.js"></script>
		<script src="../assets/js/jquery.flot.min.js"></script>
		<script src="../assets/js/jquery.flot.pie.min.js"></script>
		<script src="../assets/js/jquery.flot.resize.min.js"></script>

		<!-- ace scripts -->
		<script src="../assets/js/ace-elements.min.js"></script>
		<script src="../assets/js/ace.min.js"></script>

		<!-- inline scripts related to this page -->
		<script type="text/javascript">

            jQuery(function($){
            	$.ajaxPrefilter(function( options, originalOptions, jqXHR ) {
                    if(!options.async){
                        options.async = true;
                    }
                });



				loadMenu();
            })

			function loadMenu() {
                $.ajax(
                    "main/menu/getMenuList"
                    , {
                        async: false
                        , cache: false
                        , dataType: "json"
                        , data: {}
                        , type: "GET"
                        , ifModified:false
                        , success: function (data, textStatus, xhr) {
                            if (textStatus == "success") {
                                if(data.success != undefined){
                                    if(data.success){
                                        buildMenu(data.rows)
                                        getUserInfo()
                                    }
                                    else {
                                        alert(data.message);
                                    }
								}else{
                                    window.location.href = "../index1.html"
								}
                            }
                        }
                        , error:function(XMLHttpRequest, textStatus, errorThrown){

                        }

                    }
                );
            }

            function buildMenu(rows){
                var str = ""
                if(rows.length > 0){
                    str += "<ul class=\"nav nav-list\">"
                    for(var i=0; i< rows.length;i++){
                        if(rows[i].pcode == "0"){
                            str += "<li class=\"\"> " +
										"<a href=\"javascript:void(0);\" class=\"dropdown-toggle\">" +
                                					getMenuIcon(rows[i].code) +
												"<span class=\"menu-text\">" + rows[i].title +"</span> " +
													"<b class=\"arrow fa fa-angle-down\"></b> " +
										"</a> " +
										"<b class=\"arrow\"></b>"
                            str += "<ul class=\"submenu\"> "
							for(var j= 0; j< rows.length;j++){
                                if(rows[j].pcode == rows[i].code){
                                     str+="<li class=\"\"> " +
										         "<a href=\"javascript:void(0);\" onclick=setMain('" + rows[j].url + "')> " +
													"<i class=\"menu-icon fa fa-caret-right\"></i>" + rows[j].title
										      + " </a> <b class=\"arrow\"></b> " +
										     "</li> "

								}
							}
                            str += "</ul>"
							str += "</li>"
						}
					}
					str += "</ul>"
					console.log(str)
					$('#sidebar-js').html(str)

				}
			}

            function setMain(url){
                if(url!="#"){
                    var main = document.getElementById('main')
                    main.innerHTML = "<iframe border='none' style='border:0;' scrolling='no' id='urlIframe' onload='reinitIframe()' width='100%' height='"+ (document.body.clientHeight-180) +"px' src='" + url + "'></iframe>"
				}
            }

            function reinitIframe() {
                var iframe = document.getElementById("urlIframe");
                var iframeWin = iframe.contentWindow || iframe.contentDocument.parentWindow;
                if (iframeWin.document.body) {
                    iframe.height = iframeWin.document.documentElement.scrollHeight || iframeWin.document.body.scrollHeight;
                }
            }

			function getMenuIcon(id){
                var str = ""
				switch(id){
					case "1":
                        str = "<i class=\"menu-icon fa fa-desktop\"></i> "
					    break;
					case "2":
                        str = "<i class=\"menu-icon fa fa-pencil\"></i> "
					    break;
					case "3":
                        str = "<i class=\"menu-icon fa fa-users\"></i> "
					    break;
					case "4":
                        str = "<i class=\"menu-icon fa fa-cogs\"></i> "
					    break;
					default:
                        str = "<i class=\"menu-icon fa fa-desktop\"></i> "
				}
				return str
			}
		</script>
		<script src="../js/pages/main.js"></script>
	</body>
</html>
